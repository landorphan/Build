stages:
  - stage: PrepareStage
    jobs: 
    - job: PrepareJob
      pool:
        vmImage: 'ubuntu-latest'

      steps:
        - checkout: self
          path: s/source
        - checkout: build
          path: s/build
        - powershell: | 
            Get-ChildItem env:
          displayName: Display Envrionment Varaibles 
        - powershell: |
            if (!(Test-Path "$Env:BUILD_ARTIFACTSTAGINGDIRECTORY/build" )) { mkdir "$Env:BUILD_ARTIFACTSTAGINGDIRECTORY/build" }
            $Env:SEARCHFOR.Split(',') | foreach { Get-ChildItem -r "$_" | % { $_.FullName } } > "$Env:BUILD_ARTIFACTSTAGINGDIRECTORY/build/build.lst"
            Get-ChildItem "$Env:BUILD_ARTIFACTSTAGINGDIRECTORY"
          displayName: Locate Build Files
